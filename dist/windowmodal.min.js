/**
   * @license
   * author: killkli
   * windowmodal.js v0.0.3
   * Released under the MIT license.
   */
var windowmodal=function(){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(e)}function e(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(n)))return;var i=[],t=!0,o=!1,s=void 0;try{for(var a,d=n[Symbol.iterator]();!(t=(a=d.next()).done)&&(i.push(a.value),!e||i.length!==e);t=!0);}catch(n){o=!0,s=n}finally{try{t||null==d.return||d.return()}finally{if(o)throw s}}return i}(n,e)||function(n,e){if(!n)return;if("string"==typeof n)return i(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return i(n,e)}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}
/**
  * WindowJS is a library for displaying windows inside of a webpage.
  *
  * @author Matthias Thalmann (https://github.com/m-thalmann/)
  * @license MIT
  */()}function i(n,e){(null==e||e>n.length)&&(e=n.length);for(var i=0,t=new Array(e);i<e;i++)t[i]=n[i];return t}function t(i,o){var s=0,a=1,d=2,r=3,w=4,c=function(n,e,i){return void 0!==n[e]?n[e]:i},l=this,_=null,h=t.count++,m=!0,u={},f=w,p=s,b={width:0,height:0},g={x:0,y:0},z={x:0,y:0},v={x:0,y:0},x=null,y={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize",nw:"nwse-resize"},L=!1,E=!1;if(this.content=null,"string"!=typeof i)throw new Error("Parameter 1 must be of type string");if(void 0!==o){if("object"!==n(o))throw new Error("Parameter 2 must be of type object");if((p=c(o,"state",s))!=s&&p!=a)throw new Error("'state' must be WindowState.NORMAL or WindowState.MAXIMIZED")}else o={};function S(n){c(o,"resizable",!0)&&(E=!0,_.classList.add("window_resizing"),x=n.target.getAttribute("data-resize"),document.body.style.cursor=y[x],v.x=n.clientX,v.y=n.clientY,_.classList.add("window_no_animation"),document.addEventListener("mouseup",k),document.addEventListener("mousemove",N),document.body.classList.add("text_not_selectable"),l.on("resize_start")(n))}function k(n){n&&n.preventDefault(),o.position.y<=0&&l.maximize(),document.body.style.cursor="",_.classList.remove("window_no_animation"),_.classList.remove("window_resizing"),E=!1,document.removeEventListener("mouseup",k),document.removeEventListener("mousemove",N),document.body.classList.remove("text_not_selectable"),l.on("resize_stop")(n)}function N(n){if(n.preventDefault(),0!=E){var e=0,i=0,t=c(o,"min_size",{width:200,height:150}),s=c(o,"max_size","");"nw"!=x&&"n"!=x&&"ne"!=x||(b.height>t.height||n.clientY<o.position.y)&&(i=-(v.y-n.clientY),t.height<=b.height-i&&(""==s||s.height>=b.height-i)&&(o.position.y+=i)),"ne"!=x&&"e"!=x&&"se"!=x||(b.width>t.width||n.clientX>o.position.x+b.width)&&(e=v.x-n.clientX),"sw"!=x&&"s"!=x&&"se"!=x||(b.height>t.height||n.clientY>o.position.y+b.height)&&(i=v.y-n.clientY),"nw"!=x&&"w"!=x&&"sw"!=x||(b.width>t.width||n.clientX<o.position.x)&&(e=-(v.x-n.clientX),t.width<=b.width-e&&(""==s||s.width>=b.width-e)&&(o.position.x+=e)),"nw"!=x&&"n"!=x&&"ne"!=x&&"w"!=x&&"sw"!=x||T(),v.x=n.clientX,v.y=n.clientY,l.changeOption("size",{width:b.width-e,height:b.height-i}),D(),l.on("resize")(n)}else k()}function O(n){if(!E){if(!l.isNormalSized()){_.classList.add("window_no_animation"),l.normalSize();var e=_.getElementsByClassName("window_bar")[0];l.changeOption("position",{x:n.clientX-e.offsetWidth/2,y:n.clientY-e.offsetHeight/2}),_.classList.remove("window_no_animation")}if(n.preventDefault(),0!=L){var i=z.x-n.clientX,t=z.y-n.clientY;z.x=n.clientX,z.y=n.clientY,l.changeOption("position",{x:_.offsetLeft-i,y:_.offsetTop-t}),T(),l.on("move")(n)}else C()}}function C(n){n&&n.preventDefault(),_.classList.remove("window_moving"),o.position.y<=0&&l.maximize(),document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",C),l.on("move_stop")(n)}function H(n){_.classList.remove("window_maximized");var e=_.getElementsByClassName("window_button_toggle_maximize")[0];switch(n){case a:_.classList.add("window_maximized"),e.innerHTML=c(o,"normalsize_icon","&#10697;");break;case s:e.innerHTML=c(o,"maximize_icon","&#9744;");break;default:e.innerHTML=c(o,"maximize_icon","&#9744;"),console.warn("This state is not allowed ("+n+"); skipping")}}function M(n){switch(_.classList.remove("window_hidden"),_.classList.remove("window_minimized"),n){case w:_.classList.add("window_hidden");break;case d:_.classList.add("window_minimized");break;case r:break;default:console.warn("This window-state is not allowed ("+n+"); skipping")}}function D(){if(m){var n=c(o,"size","");""==n&&(o.size={width:200,height:150},n=o.size);var e={width:o.size.width,height:o.size.height};b.width=c(n,"width",200),b.height=c(n,"height",150);var i=c(o,"min_size",{width:200,height:150}),t=c(o,"max_size","");if(""!=i){var s=c(i,"width",""),a=c(i,"height","");""!=s&&b.width<s&&(b.width=s,o.size.width=b.width),""!=a&&b.height<a&&(b.height=a,o.size.height=b.height)}if(""!=t){var d=c(t,"width",""),r=c(t,"height","");""!=d&&b.width>d&&(b.width=d,o.size.width=b.width),""!=r&&b.height>r&&(b.height=r,o.size.height=b.height)}var w=_.parentElement;b.height>w.offsetHeight&&(b.height=w.offsetHeight,o.size.height=b.height,o.position.y=0),b.width>w.offsetWidth&&(b.width=w.offsetWidth,o.size.width=b.width,o.position.x=0),_.style.width=b.width+"px",_.style.height=b.height+"px",T(),l.on("update_size")({old_size:e,new_size:b})}}function W(){m&&(l.on("update_selected")(),c(o,"selected",!1)?(_.classList.add("window_selected"),l.on("select")()):(_.classList.remove("window_selected"),l.on("deselect")()))}function T(){if(m){var n=_.parentElement;"number"!=typeof o.position.x&&(o.position.x=n.offsetWidth/2-_.offsetWidth/2),"number"!=typeof o.position.y&&(o.position.y=n.offsetHeight/2-_.offsetHeight/2);var e=o.position,i={x:o.position.x,y:o.position.y};g.x=c(e,"x",0),g.y=c(e,"y",0),g.x<0&&(g.x=0),g.y<0&&(g.y=0),g.x>n.offsetWidth-_.offsetWidth&&(g.x=n.offsetWidth-_.offsetWidth,o.position.x=g.x),g.y>n.offsetHeight-_.offsetHeight&&(g.y=n.offsetHeight-_.offsetHeight,o.position.y=g.y),_.style.left=g.x+"px",_.style.top=g.y+"px",l.on("update_position")({old_position:i,new_position:g})}}function I(){for(var n=c(o,"events",{}),e=Object.keys(n),i=0;i<e.length;i++)u[e[i]]=n[e[i]]}function A(){m&&(c(o,"bar_visible",!0)?_.classList.remove("window_bar_hidden"):_.classList.add("window_bar_hidden"))}function X(){c(o,"resizable",!0)?_.classList.remove("window_not_resizable"):_.classList.add("window_not_resizable")}function Y(){c(o,"movable",!0)?_.classList.remove("window_not_movable"):_.classList.add("window_not_movable")}function P(){c(o,"maximizable",!0)?_.classList.remove("window_not_maximizable"):_.classList.add("window_not_maximizable")}function j(){c(o,"minimizable",!0)?_.classList.remove("window_not_minimizable"):_.classList.add("window_not_minimizable")}function B(){c(o,"always_on_top",!1)?_.classList.add("window_alway_on_top"):_.classList.remove("window_alway_on_top")}"object"!==n(o.position)&&(o.position={}),this.getTitle=function(){if(m)return i},this.setTitle=function(n){if(m){if("string"!=typeof n)throw new Error("Parameter 1 must be of type string");l.on("change_title")({old_title:i,new_title:n}),i=n,null!==_&&(_.getElementsByClassName("window_title")[0].innerHTML=i)}},this.getContainer=function(){if(m)return null==_&&console.warn("Container not yet created"),_},this.changeOption=function(n,e){if(m){if("string"!=typeof n)throw new Error("Parameter 1 must be of type string");if(void 0===e)throw new Error("Parameter 2 must be set");if(o[n]=e,null!=_)switch(n){case"icon":_.getElementsByClassName("window_icon")[0].innerHTML=e;break;case"minimize_icon":_.getElementsByClassName("window_button_minimize")[0].innerHTML=e;break;case"maximize_icon":case"normalsize_icon":H(p);break;case"close_icon":_.getElementsByClassName("window_button_close")[0].innerHTML=e;break;case"size":D();break;case"position":T();break;case"selected":W();break;case"min_size":case"max_size":D();break;case"events":I();break;case"bar_visible":A();break;case"resizable":X();break;case"movable":Y();break;case"maximizable":P();break;case"minimizable":j();break;case"always_on_top":B();break;default:this.reload()}}},this.getOptions=function(){if(m)return o},this.reload=function(){if(m=!0,c(o,"container",null)!==_&&null!=_&&(_.remove(),_=null),null==_){var n=c(o,"container",document.body);(_=document.createElement("div")).id="window_"+h,_.className=_.id+"_window",_.window=l,n.appendChild(_),_.customStyle=function(n){for(var i=e(function(){var n=document.createElement("style");return n.appendChild(document.createTextNode("")),document.head.appendChild(n),[n,n.sheet]}(),2),t=i[0],o=i[1],s=[".".concat(n,"_window{\n  border: 1px solid #ccc;\n  position: absolute;\n  z-index: 200;\n  border-radius: 2px;\n  box-sizing: border-box;\n\n  transform: scale(1);\n}"),".".concat(n,"_window:not(.window_no_animation):not(.window_moving){\n  transition: transform 0.2s, width 0.1s, height 0.1s, left 0.02s, right 0.02s;\n}"),".".concat(n,"_window *{\n  position: relative;\n  box-sizing: border-box;\n}"),".".concat(n,"_window.window_alway_on_top{\n  z-index: 210;\n}"),".".concat(n,"_window.window_alway_on_top.window_selected{\n  z-index: 211;\n}"),".".concat(n,"_window .window_bar{\n  border-bottom: 1px solid #ccc;\n  background-color: #eee;\n  height: 2em;\n}"),".".concat(n,"_window .window_bar, .text_not_selectable{\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}"),".".concat(n,"_window .window_bar > *{\n  display: inline-block;\n}"),".".concat(n,"_window .window_bar *{\n  transition: all 0.2s;\n}"),".".concat(n,"_window .window_bar .window_icon{\n  margin: 0 10px;\n  text-align: center;\n  vertical-align: middle;\n  cursor: pointer;\n}"),".".concat(n,"_window .window_bar .window_title{\n  cursor: default;\n  padding: 5px;\n  overflow: hidden;\n  max-width: calc(100% - 150px);\n  vertical-align: middle;\n}"),".".concat(n,"_window .window_bar .window_toggle_buttons{\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  vertical-align: top;\n  margin-left: 10px;\n  z-index: 202;\n}"),".".concat(n,"_window .window_bar .window_toggle_buttons:after{\n  clear: both;\n}"),".".concat(n,"_window .window_bar .window_toggle_buttons > *{\n  padding-top: 2px;\n  padding-bottom: 5px;\n  width: 2em;\n  text-align: center;\n  cursor: pointer;\n  height: 100%;\n  overflow: hidden;\n  display: inline-block;\n}"),".".concat(n,"_window .window_bar .window_toggle_buttons > *:hover{\n  background-color: #ccc;\n}"),".".concat(n,"_window.window_not_maximizable .window_button_toggle_maximize, .").concat(n,"_window.window_not_minimizable .window_button_minimize{\n  display: none;\n}"),".".concat(n,"_window .window_bar .window_toggle_buttons .window_button_close:hover{\n  background-color: #ccc;\n}"),".".concat(n,"_window .window_content{\n  overflow: auto;\n  background-color: #fff;\n  position: absolute;\n  top: 2em;\n  right: 0;\n  left: 0;\n  bottom: 0;\n}"),".".concat(n,"_window.window_maximized:not(.window_minimized){\n  top: 0 !important;\n  left: 0 !important;\n  right: 0 !important;\n  bottom: 0 !important;\n\n  width: 100% !important;\n  height: 100% !important;\n}"),".".concat(n,"_window.window_minimized{\n  transform: scale(0);\n}"),".".concat(n,"_window.window_hidden{\n  display: none;\n}"),".".concat(n,"_window.window_selected{\n  -webkit-box-shadow: 0px 0px 17px -4px rgba(0,0,0,0.73);\n  -moz-box-shadow: 0px 0px 17px -4px rgba(0,0,0,0.73);\n  box-shadow: 0px 0px 17px -4px rgba(0,0,0,0.73);\n  z-index: 202;\n}"),".".concat(n,"_window.window_selected .window_bar{\n  background-color: #ddd;\n}"),".".concat(n,"_window.window_selected .window_bar .window_toggle_buttons .window_button_close:hover{\n  background-color: #f12;\n  color: #fff;\n}"),".".concat(n,"_window.window_maximized .window_resize_handle, .").concat(n,"_window.window_not_resizable .window_resize_handle, .").concat(n,"_window.window_resizing .window_resize_handle{\n  display: none;\n}"),".".concat(n,"_window .window_resize_handle{\n  position: absolute;\n  display: block;\n  opacity: 0;\n}"),".".concat(n,"_window .window_resize_handle_n, .window_resize_handle_s{\n  height: 3px;\n  left: 0;\n  right: 0;\n}"),".".concat(n,"_window .window_resize_handle_w, .").concat(n,"_window .window_resize_handle_e{\n  width: 3px;\n  top: 0;\n  bottom: 0;\n}"),".".concat(n,"_window .window_resize_handle_n, .").concat(n,"_window .window_resize_handle_ne, .").concat(n,"_window .window_resize_handle_nw{\n  top: -3px;\n}"),".".concat(n,"_window .window_resize_handle_s, .").concat(n,"_window .window_resize_handle_se, .").concat(n,"_window .window_resize_handle_sw{\n  bottom: -3px;\n}"),".".concat(n,"_window .window_resize_handle_w, .").concat(n,"_window .window_resize_handle_sw, .").concat(n,"_window .window_resize_handle_nw{\n  left: -3px;\n}"),".".concat(n,"_window .window_resize_handle_e, .").concat(n,"_window .window_resize_handle_ne, .").concat(n,"_window .window_resize_handle_se{\n  right: -3px;\n}"),".".concat(n,"_window .window_resize_handle_ne, .").concat(n,"_window .window_resize_handle_se, .").concat(n,"_window .window_resize_handle_sw, .").concat(n,"_window .window_resize_handle_nw{\n  width: 3px;\n  height: 3px;\n}"),".".concat(n,"_window.window_bar_hidden .window_bar{\n  display: none;\n}"),".".concat(n,"_window.window_bar_hidden .window_content{\n  top: 0;\n}")],a=0;a<s.length;a++)o.insertRule(s[a],o.cssRules.length);return t}(_.id)}D(),T(),W(),I(),A(),X(),Y(),P(),j(),B(),M(f=c(o,"window_state",r)),_.innerHTML="";var s=document.createElement("div");s.className="window_bar";var a=document.createElement("span");a.className="window_icon",a.innerHTML=c(o,"icon","");var d=document.createElement("span");d.className="window_title",d.innerHTML=i;var w=document.createElement("div");w.className="window_toggle_buttons";var u=document.createElement("span");u.className="window_button_minimize",u.innerHTML=c(o,"minimize_icon","_");var b=document.createElement("span");b.className="window_button_toggle_maximize";var g=document.createElement("span");g.className="window_button_close",g.innerHTML=c(o,"close_icon","&#9587;"),w.appendChild(u),w.appendChild(b),w.appendChild(g),s.appendChild(a),s.appendChild(d),s.appendChild(w),_.appendChild(s);for(var v=new Array,x=["n","ne","e","se","s","sw","w","nw"],E=0;E<8;E++){var k=document.createElement("div");k.className="window_resize_handle window_resize_handle_"+x[E],k.setAttribute("data-resize",x[E]),k.addEventListener("mousedown",S),k.style.cursor=y[x[E]],v.push(k),_.appendChild(k)}H(p),null==this.content&&(this.content=document.createElement("div"),this.content.className="window_content"),_.appendChild(this.content);var N=0;s.addEventListener("mousedown",(function(n){if(0==n.button){if(L=!0,c(o,"movable",!0)){for(var e=n.target;e!=s;){if(e==u||e==b||e==g)return;e=e.parentElement}n.preventDefault(),z.x=n.clientX,z.y=n.clientY,_.classList.add("window_moving"),document.addEventListener("mousemove",O),document.addEventListener("mouseup",C)}1==++N&&setTimeout((function(){1==N?l.on("move_start")(n):l.toggleMaximize(),N=0}),t.DOUBLE_CLICK_DELAY)}})),s.addEventListener("mouseup",(function(n){0==n.button&&(L=!1)})),u.addEventListener("click",(function(n){n.preventDefault(),l.minimize()})),b.addEventListener("click",(function(n){n.preventDefault(),l.toggleMaximize()})),g.addEventListener("click",(function(n){n.preventDefault(),l.close()})),I(),l.on("reload")()},this.changeState=function(n){if(m){if(n!=s&&n!=a)throw new Error("Parameter 1 must be WindowState.NORMAL or WindowState.MAXIMIZED");l.on("change_state")({old_state:p,new_state:n}),p=n,H(n)}},this.changeWindowState=function(n){if(m){if(n!=d&&n!=w&&n!=r)throw new Error("Parameter 1 must be WindowState.HIDDEN or WindowState.MINIMIZED or WindowState.SHOWN");l.on("change_window_state")({old_window_state:f,new_window_state:n}),M(f=n)}},this.minimize=function(){m&&c(o,"minimizable",!0)&&!1!==l.on("minimizing")&&(this.changeWindowState(d),l.on("minimize")())},this.normalSize=function(){m&&(this.changeState(s),l.on("normalSize")())},this.maximize=function(){m&&c(o,"maximizable",!0)&&!1!==l.on("maximizing")&&(this.changeState(a),D(),l.on("maximize")())},this.toggleMaximize=function(){m&&(p==s?l.maximize():l.normalSize())},this.hide=function(){m&&(this.changeWindowState(w),l.on("hide")())},this.show=function(){m&&(this.changeWindowState(r),l.on("show")())},this.on=function(n,e){if(m)return void 0===e?"function"==typeof u[n]?u[n]:function(){}:void(u[n]=e)},this.removeOn=function(n){m&&delete u[n]},this.getState=function(){if(m)return p},this.getWindowState=function(){if(m)return f},this.getSize=function(){if(m)return b},this.getPosition=function(){if(m)return g},this.isMinimized=function(){if(m)return f==d},this.isHidden=function(){if(m)return f==w},this.isShown=function(){if(m)return f==r},this.isVisible=function(){if(m)return!(this.isMinimized()||this.isHidden())},this.isMaximized=function(){if(m)return p==a},this.isNormalSized=function(){if(m)return p==s},this.isSelected=function(){if(m)return c(o,"selected",!1)},this.reset=function(){m&&(this.show(),this.normalSize(),l.on("reset")())},this.close=function(){var n=c(o,"close_action",t.DISPOSE_ON_CLOSE);m&&n!=t.DO_NOTHING_ON_CLOSE&&!1!==l.on("closing")()&&(this.hide(),l.on("closed")(),n==t.DISPOSE_ON_CLOSE&&this.dispose())},this.dispose=function(){!1!==l.on("disposing")()&&(document.head.removeChild(_.customStyle),_.customStyle=null,this.content.remove(),this.content=null,_.remove(),_=null,l.on("disposed")(),m=!1)},this.reload(),l.on("init")()}return t.count=0,t.DISPOSE_ON_CLOSE=0,t.HIDE_ON_CLOSE=1,t.DO_NOTHING_ON_CLOSE=2,t.DOUBLE_CLICK_DELAY=300,{Window:t}}();
